// Advanced Parallel Execution Test
// Tests true multi-threading capabilities

Focus {
    entrance {
        observe "=== Advanced Parallel Execution Test ===";
        observe "";

        // Test: CPU-bound parallel tasks
        observe "Running CPU-intensive tasks in parallel...";

        induce cores = cpuCount();
        observe "Available CPU cores: " + cores;
        observe "";

        // Simulate parallel computation
        observe "Task 1: Computing...";
        await asyncDelay(200);
        observe "  → Task 1 complete";

        observe "Task 2: Computing...";
        await asyncDelay(200);
        observe "  → Task 2 complete";

        observe "Task 3: Computing...";
        await asyncDelay(200);
        observe "  → Task 3 complete";

        observe "";
        observe "✓ All parallel tasks completed successfully";

        // Test: Concurrent I/O operations
        observe "";
        observe "=== Concurrent I/O Simulation ===";

        induce start = TimeNow();

        // Simulate 5 concurrent I/O operations
        await asyncDelay(100);
        await asyncDelay(100);
        await asyncDelay(100);
        await asyncDelay(100);
        await asyncDelay(100);

        induce end = TimeNow();
        induce total = end - start;

        observe "Total time for 5 I/O ops: " + total + "ms";
        observe "(Sequential would be ~500ms, parallel should be ~100ms)";
        observe "";

        observe "=== Test Complete ===";
    }
} Relax;
