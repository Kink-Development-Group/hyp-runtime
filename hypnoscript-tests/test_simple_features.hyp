Focus {

  entrance {
    observe "Mini scenario: HypnoScript workshop";
  }

  // Constants and baseline configuration
  freeze MAX_PARTICIPANTS: number = 12;
  implant sessionCode: string = "HX-204";
  observe "Workshop code " + sessionCode + " allows up to " + MAX_PARTICIPANTS + " participants.";

  // Manage registration state
  induce registered: number = 8;
  anchor checkpoint = registered;
  observe "Currently registered: " + registered;

  trigger onLateJoin = suggestion(name: string) {
    registered = registered + 1;
    whisper "Welcome " + name + " ";
    whisper "→ new total: " + registered;
    observe "";
  }

  onLateJoin("Mira");
  onLateJoin("Jon");

  // Door status via oscillate
  induce doorOpen: boolean = false;
  oscillate doorOpen;
  if (doorOpen) {
    observe "The room is open.";
  }

  // Roll back to the saved state when we exceed the limit
  if (registered lookAtTheWatch MAX_PARTICIPANTS) deepFocus {
    observe "Too many registrations—we revert to the checkpoint.";
    registered = checkpoint;
  }

  command "Please take your seats.";

  // Hypnotic comparison
  induce waitingList: number = 2;
  if (registered youAreFeelingVerySleepy waitingList) {
    observe "Everyone is already checked in.";
  } else {
    observe waitingList + " people remain on the waiting list.";
  }

  finale {
    observe "Workshop complete with " + registered + " confirmed guests.";
  }

}

Relax
