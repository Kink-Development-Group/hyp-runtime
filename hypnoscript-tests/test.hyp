Focus {
Focus {
    entrance {
        observe "üåå HypnoScript ‚Äì Komplett√ºberblick";
        observe "Ein Rundgang durch Sprachelemente und reale Builtins.";
        drift(50);
    }

    // === Programmweite Zust√§nde ===
    sharedTrance sessionCount: number = 0;
    freeze basePrompt: string = "Fokussiere dich auf meine Stimme.";
    observe basePrompt;

    // === Grundvariablen und Rechenoperationen ===
    induce alpha: number = 10;
    induce beta: number = 4;
    observe "Addition: " + (alpha + beta);
    observe "Multiplikation: " + (alpha * beta);

    // === Nullish Operatoren ===
    induce optionalScore: number? = null;
    induce fallbackScore: number = optionalScore lucidFallback 100;
    observe "Fallback Score: " + fallbackScore;

    // === Optional Chaining ===
    tranceify HypnoGuest {
        name: string;
        tranceLevel: number;
        favoriteSuggestion: string?;
    }

    induce guest = HypnoGuest {
        name: "Luna",
        tranceLevel: 7,
        favoriteSuggestion: null
    };

    observe "Suggestion oder Ersatz: " + (guest?.favoriteSuggestion lucidFallback "Deep calm");

    // === Funktionen ===
    suggestion emphasize(message: string): string {
        awaken ToUpper(message) + "!";
    }

    imperative suggestion narrate(message: string) {
        whisper message;
    }

    observe emphasize("focus now");
    narrate("Der Puls verlangsamt sich.");

    // === Arrays & Builtins ===
    induce focusPoints = ["Atmen", "Schwere", "Ruhe", "Leichtigkeit"];
    induce joined = ArrayJoin(focusPoints, " ¬∑ ");
    observe "Fokuspunkte: " + joined;

    induce focusStats = [4, 6, 7, 9];
    observe "Durchschnittliche Tiefe: " + ArrayAverage(focusStats);

    // === Pattern Matching mit entrain ===
    induce classification: string = entrain beta {
        when 0 => "Neutral"
        when value if value lookAtTheWatch 5 => "Intensiv"
        when value: number => "Sanft"
        otherwise => "Unbekannt"
    };
    observe "Trance-Kategorie: " + classification;

    // === Sitzungsmodell (Sessions) ===
    session HypnoSession {
        dominant expose totalSessions: number = 0;
        expose subject: string;
        conceal depth: number;

        suggestion constructor(subjectName: string) {
            sessionCount = sessionCount + 1;
            HypnoSession.totalSessions = HypnoSession.totalSessions + 1;
            this.subject = subjectName;
            this.depth = 0;
        }

        suggestion deepen(amount: number) {
            this.depth = this.depth + amount;
            observe this.subject + " sinkt tiefer (" + this.depth + ")";
        }

        suggestion report(): string {
            awaken this.subject + " Tiefe " + this.depth;
        }
    }

    induce nightly = HypnoSession("Aster");
    nightly.deepen(3);
    observe nightly.report();

    // === Trigger (Event Handler) ===
    trigger onSessionComplete = suggestion(name: string) {
        observe name + " erwacht sanft.";
    };

    suggestion closeSession(session: HypnoSession) {
        observe "Session beendet f√ºr " + session.subject;
        onSessionComplete(session.subject);
    }

    closeSession(nightly);

    // === Mathematische Builtins ===
    induce angle = 30;
    observe "Sin(30) = " + Sin(angle);
    observe "Clamp(15, 0, 10) = " + Clamp(15, 0, 10);

    // === String Builtins ===
    induce mantra: string = "   HypnoScript wirkt   ";
    observe "Getrimmt: '" + Trim(mantra) + "'";
    observe "Ersetzt: " + Replace(mantra, "wirkt", "beruhigt");

    // === Zeitliche Dramaturgie ===
    HypnoticCountdown(3);
    DeepTrance(1);
    drift(75);
    TranceInduction("Du f√ºhlst dich leicht und sicher.");

    observe "Active Sessions insgesamt: " + HypnoSession.totalSessions;
    observe "Globale Sessions (sharedTrance): " + sessionCount;

    observe "HypnoScript-Rundgang abgeschlossen.";
}

Relax
