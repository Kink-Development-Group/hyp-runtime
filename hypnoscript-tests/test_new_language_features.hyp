// HypnoScript Test File f端r moderne Sprachfeatures
// Fokus: embed, pendulum, murmur, await, lucidFallback, dreamReach optional chaining

Focus {
    observe "=== Neue Sprachfeatures in Aktion ===";

    // embed legt eine globale Erinnerung an
    embed deepMemory: number = 42;
    observe "Eingebetteter Wert: " + deepMemory;

    // Pendulum (for-Schleife im HypnoScript-Stil) mit murmur-Ausgaben
    observe "=== Pendulum-Zusammenfassung ===";
    induce sum: number = 0;
    pendulum (induce i: number = 0; i < 4; i = i + 1) {
        sum = sum + i;
        murmur "Iteration " + i + ": Summe = " + sum;
    }
    observe "Gesamtsumme: " + sum;

    // Nullish Operator (lucidFallback)
    induce optionalLocale = GetEnv("HYP_RUNTIME_DEMO_LOCALE");
    induce resolvedLocale = optionalLocale lucidFallback "de-DE";
    observe "Locale Fallback: " + resolvedLocale;

    // await kann auch auf einfache Ausdr端cke angewendet werden
    induce awaitedValue = await (sum + 5);
    observe "Await Ergebnis: " + awaitedValue;

    // Optional Chaining mit dreamReach
    session DataEnvelope {
        expose payload;

        suggestion attach(value: string) {
            this.payload = value;
        }
    }

    induce emptyEnvelope = DataEnvelope();
    induce fullEnvelope = DataEnvelope();
    fullEnvelope.attach("Trance Transcript");

    observe "Optional chaining leer: " + ((emptyEnvelope dreamReach payload) lucidFallback "(leer)");
    observe "Optional chaining gesetzt: " + ((fullEnvelope dreamReach payload) lucidFallback "(leer)");

    // murmur als leise Diagnoseausgabe
    murmur "DreamReach gibt null zur端ck, wenn nichts vorhanden ist.";

    // Mehrere Ausgabetypen bleiben kombinierbar
    observe "Standardausgabe aktiv.";
    whisper "leichter fl端sterton";
    command "COMMAND CHANNEL";

    finale {
        observe "";
        observe "=== Neue Sprachfeatures erfolgreich demonstriert ===";
    }
}

Relax
