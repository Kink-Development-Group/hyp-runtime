Focus {
    entrance {
        observe "=== HypnoScript extended features showcase ===";
        observe "(Simulated breathing focus for 600 ms)";
        observe "Ready for a tour through the real runtime functions.";
    }

    // ===== MATHEMATICS & RANDOMNESS =====
    observe "=== Advanced mathematics ===";
    induce pi: number = 3.14159;
    observe "π ≈ " + pi;
    observe "Sin(30°): " + Sin(30);
    observe "Cos(60°): " + Cos(60);
    observe "Tan(45°): " + Tan(45);
    observe "Sqrt(144): " + Sqrt(144);
    observe "Pow(2, 10): " + Pow(2, 10);
    observe "Log(100): " + Log(100);
    observe "Log10(1000): " + Log10(1000);
    observe "Max(42, 17): " + Max(42, 17);
    observe "Min(42, 17): " + Min(42, 17);
    observe "Abs(-42): " + Abs(-42);
    observe "Round(3.5): " + Round(3.5);
    observe "Floor(3.7): " + Floor(3.7);
    observe "Ceil(3.2): " + Ceil(3.2);
    observe "Factorial(5): " + Factorial(5);
    observe "IsPrime(29): " + IsPrime(29);
    observe "Clamp(1.5, 0, 1): " + Clamp(1.5, 0, 1);
    observe "SimpleRandom(42): " + SimpleRandom(42);

    // ===== STRING BUILTINS =====
    observe "=== String manipulation ===";
    induce sampleText: string = "  HypnoScript gently widens focus  ";
    observe "Original: '" + sampleText + "'";
    observe "Trim: '" + Trim(sampleText) + "'";
    observe "ToUpper: '" + ToUpper(sampleText) + "'";
    observe "ToLower: '" + ToLower(sampleText) + "'";
    observe "Replace('focus'->'clarity'): '" + Replace(sampleText, "focus", "clarity") + "'";
    observe "Substring(4, 11): '" + Substring(sampleText, 4, 11) + "'";
    observe "StartsWith('  Hyp'): " + StartsWith(sampleText, "  Hyp");
    observe "EndsWith('  '): " + EndsWith(sampleText, "  ");
    observe "Contains('Script'): " + Contains(sampleText, "Script");
    observe "IndexOf('Script'): " + IndexOf(sampleText, "Script");
    observe "CountOccurrences('o'): " + CountOccurrences(sampleText, "o");
    observe "UniqueCharacters('focus'): " + UniqueCharacters("focus");
    observe "PadLeft trim -> 40: '" + PadLeft(Trim(sampleText), 40, "*") + "'";
    observe "PadRight trim -> 40: '" + PadRight(Trim(sampleText), 40, "#") + "'";
    observe "Split words: " + ToString(Split(Trim(sampleText), " "));
    observe "IsPalindrome('level'): " + IsPalindrome("level");
    observe "AreAnagrams('listen','silent'): " + AreAnagrams("listen", "silent");

    // ===== ARRAYS & STATISTICS =====
    observe "=== Arrays & statistics ===";
    induce metrics = [5, 12, 9, 5, 18, 12];
    observe "Raw data:";
    observe metrics;
    observe "Sum: " + ArraySum(metrics);
    observe "Average: " + ArrayAverage(metrics);
    observe "Minimum: " + ArrayMin(metrics);
    observe "Maximum: " + ArrayMax(metrics);
    observe "Sorted:";
    observe ArraySort(metrics);

    induce satisfaction = [3.8, 4.1, 4.5, 4.7, 4.3];
    observe "Mean: " + Mean(satisfaction);
    observe "Median: " + Median(satisfaction);
    observe "Variance: " + Variance(satisfaction);
    observe "Standard deviation: " + StandardDeviation(satisfaction);
    observe "75th percentile: " + Percentile(satisfaction, 0.75);

    induce retention = [72, 78, 81, 88, 91];
    observe "Correlation (satisfaction↔retention): " + Correlation(satisfaction, retention);
    observe "Linear regression: " + ToString(LinearRegression(satisfaction, retention));

    // ===== TIME & SYSTEM =====
    observe "=== Time and system functions ===";
    observe "Timestamp: " + CurrentTimestamp();
    observe "Date/time: " + CurrentDateTime();
    observe "Day of week: " + DayOfWeek();
    observe "Day of year: " + DayOfYear();
    observe "Hour: " + CurrentHour();
    observe "CPU cores: " + GetCpuCount();
    observe "Hostname: " + GetHostname();
    observe "Username: " + GetUsername();
    observe "HOME directory: " + GetHomeDirectory();
    observe "PATH present?: " + (GetEnv("PATH") lucidFallback "(not set)");

    // ===== HYPNOTIC BUILTINS =====
    observe "=== Hypnotic core commands ===";
    TranceInduction("Concentration pools within the breath.");
    HypnoticVisualization("a bright, calm studio");
    HypnoticCountdown(3);
    observe "Gentle phase transition (400 ms simulated).";
    DeepTrance(250);
    observe "Back to a light focus.";

    // ===== DATA STRUCTURES =====
    observe "=== tranceify & sessions ===";
    tranceify SessionReport {
        subject: string;
        duration: number;
        rating: number;
    }

    induce report = SessionReport {
        subject: "Clara",
        duration: 45,
        rating: 8
    };
    observe "Report: " + report.subject + " · " + report.duration + "min · rating " + report.rating;

    session HypnoticCoach {
        expose name: string;
        expose totalSessions: number;

        suggestion constructor(n: string) {
            this.name = n;
            this.totalSessions = 0;
        }

        suggestion registerSession(duration: number): number {
            this.totalSessions = this.totalSessions + 1;
            observe this.name + " logs a session lasting " + duration + " minutes.";
            awaken this.totalSessions;
        }
    }

    induce coach = HypnoticCoach("Dr. Aurora");
    induce sessionsLogged = coach.registerSession(report.duration);
    observe "Sessions in total: " + sessionsLogged;

    // ===== PATTERNS WITH OPERATOR SYNONYMS =====
    observe "=== Hypnotic operators ===";
    induce target: number = 21;
    induce guess: number = 21;
    if (guess youAreFeelingVerySleepy target) {
        observe "Match!";
    }
    if (guess lookAtTheWatch 10) {
        observe "Greater than 10.";
    }
    if (10 fallUnderMySpell guess) {
        observe "10 is below the value.";
    }

    observe "=== Showcase complete ===";
    observe "Every example above uses registered HypnoScript builtins.";
}

Relax
