Focus {
    entrance {
        observe "=== HypnoScript Extended Features Showcase ===";
        observe "(Simulierte Atemfokussierung für 600 ms)";
        observe "Bereit für einen Rundgang durch die echten Laufzeitfunktionen.";
    }

    // ===== MATHEMATIK & RANDOMNESS =====
    observe "=== Erweiterte Mathematik ===";
    induce pi: number = 3.14159;
    observe "π ≈ " + pi;
    observe "Sin(30°): " + Sin(30);
    observe "Cos(60°): " + Cos(60);
    observe "Tan(45°): " + Tan(45);
    observe "Sqrt(144): " + Sqrt(144);
    observe "Pow(2, 10): " + Pow(2, 10);
    observe "Log(100): " + Log(100);
    observe "Log10(1000): " + Log10(1000);
    observe "Max(42, 17): " + Max(42, 17);
    observe "Min(42, 17): " + Min(42, 17);
    observe "Abs(-42): " + Abs(-42);
    observe "Round(3.5): " + Round(3.5);
    observe "Floor(3.7): " + Floor(3.7);
    observe "Ceil(3.2): " + Ceil(3.2);
    observe "Factorial(5): " + Factorial(5);
    observe "IsPrime(29): " + IsPrime(29);
    observe "Clamp(1.5, 0, 1): " + Clamp(1.5, 0, 1);
    observe "SimpleRandom(42): " + SimpleRandom(42);

    // ===== STRING-BUILTINS =====
    observe "=== String-Manipulation ===";
    induce sampleText: string = "  HypnoScript gently widens focus  ";
    observe "Original: '" + sampleText + "'";
    observe "Trim: '" + Trim(sampleText) + "'";
    observe "ToUpper: '" + ToUpper(sampleText) + "'";
    observe "ToLower: '" + ToLower(sampleText) + "'";
    observe "Replace('focus'->'clarity'): '" + Replace(sampleText, "focus", "clarity") + "'";
    observe "Substring(4, 11): '" + Substring(sampleText, 4, 11) + "'";
    observe "StartsWith('  Hyp'): " + StartsWith(sampleText, "  Hyp");
    observe "EndsWith('  '): " + EndsWith(sampleText, "  ");
    observe "Contains('Script'): " + Contains(sampleText, "Script");
    observe "IndexOf('Script'): " + IndexOf(sampleText, "Script");
    observe "CountOccurrences('o'): " + CountOccurrences(sampleText, "o");
    observe "UniqueCharacters('focus'): " + UniqueCharacters("focus");
    observe "PadLeft trim -> 40: '" + PadLeft(Trim(sampleText), 40, "*") + "'";
    observe "PadRight trim -> 40: '" + PadRight(Trim(sampleText), 40, "#") + "'";
    observe "Split words: " + ToString(Split(Trim(sampleText), " "));
    observe "IsPalindrome('level'): " + IsPalindrome("level");
    observe "AreAnagrams('listen','silent'): " + AreAnagrams("listen", "silent");

    // ===== ARRAYS & STATISTIK =====
    observe "=== Arrays & Statistik ===";
    induce metrics = [5, 12, 9, 5, 18, 12];
    observe "Rohdaten:";
    observe metrics;
    observe "Summe: " + ArraySum(metrics);
    observe "Durchschnitt: " + ArrayAverage(metrics);
    observe "Minimum: " + ArrayMin(metrics);
    observe "Maximum: " + ArrayMax(metrics);
    observe "Sortiert:";
    observe ArraySort(metrics);

    induce satisfaction = [3.8, 4.1, 4.5, 4.7, 4.3];
    observe "Mittelwert: " + Mean(satisfaction);
    observe "Median: " + Median(satisfaction);
    observe "Varianz: " + Variance(satisfaction);
    observe "Standardabweichung: " + StandardDeviation(satisfaction);
    observe "Perzentil 75%: " + Percentile(satisfaction, 0.75);

    induce retention = [72, 78, 81, 88, 91];
    observe "Korrelation (Satisfaction↔Retention): " + Correlation(satisfaction, retention);
    observe "Lineare Regression: " + ToString(LinearRegression(satisfaction, retention));

    // ===== ZEIT & SYSTEM =====
    observe "=== Zeit- und Systemfunktionen ===";
    observe "Timestamp: " + CurrentTimestamp();
    observe "Datum/Zeit: " + CurrentDateTime();
    observe "Wochentag: " + DayOfWeek();
    observe "Jahres-Tag: " + DayOfYear();
    observe "Stunde: " + CurrentHour();
    observe "CPU-Kerne: " + GetCpuCount();
    observe "Hostname: " + GetHostname();
    observe "Benutzername: " + GetUsername();
    observe "HOME-Verzeichnis: " + GetHomeDirectory();
    observe "PATH vorhanden?: " + (GetEnv("PATH") lucidFallback "(nicht gesetzt)");

    // ===== HYPNOTISCHE BUILTINS =====
    observe "=== Hypnotische Kernbefehle ===";
    TranceInduction("Konzentration bündelt sich im Atem.");
    HypnoticVisualization("ein helles, ruhiges Studio");
    HypnoticCountdown(3);
    observe "Sanfte Phasewechsel (400 ms simuliert).";
    DeepTrance(250);
    observe "Zurück im leichten Fokus.";

    // ===== DATENSTRUKTUREN =====
    observe "=== tranceify & Sessions ===";
    tranceify SessionReport {
        subject: string;
        duration: number;
        rating: number;
    }

    induce report = SessionReport {
        subject: "Clara",
        duration: 45,
        rating: 8
    };
    observe "Report: " + report.subject + " · " + report.duration + "min · Bewertung " + report.rating;

    session HypnoticCoach {
        expose name: string;
        expose totalSessions: number;

        suggestion constructor(n: string) {
            this.name = n;
            this.totalSessions = 0;
        }

        suggestion registerSession(duration: number): number {
            this.totalSessions = this.totalSessions + 1;
            observe this.name + " protokolliert eine Session über " + duration + " Minuten.";
            awaken this.totalSessions;
        }
    }

    induce coach = HypnoticCoach("Dr. Aurora");
    induce sessionsLogged = coach.registerSession(report.duration);
    observe "Sessions insgesamt: " + sessionsLogged;

    // ===== MUSTER MIT OPERATOR-SYNONYME =====
    observe "=== Hypnotische Operatoren ===";
    induce target: number = 21;
    induce guess: number = 21;
    if (guess youAreFeelingVerySleepy target) {
        observe "Treffer!";
    }
    if (guess lookAtTheWatch 10) {
        observe "Mehr als 10.";
    }
    if (10 fallUnderMySpell guess) {
        observe "10 liegt darunter.";
    }

    observe "=== Showcase abgeschlossen ===";
    observe "Alle gezeigten Beispiele verwenden registrierte HypnoScript-Builtins.";
}

Relax
