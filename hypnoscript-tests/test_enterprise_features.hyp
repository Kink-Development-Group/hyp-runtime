Focus {
    entrance {
        observe "üè¢ Enterprise Features: Sessions & Events";
    }

    sharedTrance totalSessions: number = 0;

    trigger onStatusChanged = suggestion(name: string, status: string) {
        observe "[Trigger] " + name + " -> " + status;
    };

    session EnterpriseSession {
        dominant expose activeSessions: number = 0;
        expose client: string;
        conceal depth: number;

        suggestion constructor(clientName: string) {
            EnterpriseSession.activeSessions = EnterpriseSession.activeSessions + 1;
            totalSessions = totalSessions + 1;
            this.client = clientName;
            this.depth = 0;
            onStatusChanged(this.client, "er√∂ffnet");
        }

        suggestion deepen(amount: number) {
            this.depth = this.depth + amount;
            onStatusChanged(this.client, "Tiefe " + ToString(this.depth));
        }

        suggestion close() {
            EnterpriseSession.activeSessions = EnterpriseSession.activeSessions - 1;
            onStatusChanged(this.client, "geschlossen");
        }

        dominant suggestion reset() {
            EnterpriseSession.activeSessions = 0;
            onStatusChanged("System", "Reset ausgef√ºhrt");
        }
    }

    induce first = EnterpriseSession("Aurora Labs");
    first.deepen(3);

    induce second = EnterpriseSession("Trance Corp");
    second.deepen(2);
    second.deepen(2);
    second.close();

    observe "Aktive Sessions: " + EnterpriseSession.activeSessions;
    observe "Gesamtsessions (shared): " + totalSessions;

    EnterpriseSession.reset();

    observe "Enterprise-Demo abgeschlossen.";
}

Relax
